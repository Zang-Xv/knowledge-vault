# 如何自检网络情况

在使用 gpt 或者是和其他网络设备的时候, 有时会出现有网络但是连接不正常的情况  
我想起之前计算机网络课程学到的各种命令, 想知道有没有一套行之有效并且自然的自检过程, 可以让我自行排除问题

## 排查流程思路

可以把排查过程想象成从“近 → 远”地定位问题：

- 设备层：你的电脑、Wi-Fi、网卡是否正常？
- 局域网层：本地网络（路由器、网关、DNS）是否通？
- 网络传输层：能否访问公网？能否 ping 到 IP？
- 域名解析层：DNS 是否能把域名解析成 IP？
- 应用层：目标服务或端口是否挂了？被防火墙或运营商屏蔽了吗？

### 设备层

使用`ipconfig`来确认是否有IP地址, 网卡是否启用

### 局域网层

检查本地网络是否能够联通
ping 本地网关

如果不通: 重启网卡 / 切换 Wi-Fi / 重新获取 DHCP。

重启网卡步骤: 控制面板 → 网络适配器 → 禁用 → 启用
让交换机重新“学习”你的 MAC

局域网层本地网关连接就失效，也可能是受到了校园网的交换机对 ARP 的限制
可以`arp -a`查看arp, 如果没有现实网关IP的mac地址, 说明主机根本没法和网关建立二层通信

删除arp表
arp -d *

释放 / 续租 DHCP
ipconfig /release
ipconfig /renew

### 网络传输层

检查外网连通性
ping 8.8.8.8 # google公共DNS

不通说明可能是运营商或者防火墙问题

### 域名解析层

使用`nslookup`看是否能够解析出ip

如果不能说明DNS出现问题

### 应用层

检查目标主机连通性

执行：

ping [目标域名或IP]


再用：

tracert [目标域名]     # Windows
traceroute [目标域名]  # mac/Linux


看路径卡在哪一跳。
→ 卡在前几跳是本地或路由问题，
→ 卡在后几跳可能是目标主机防火墙或地理封锁。

检查服务端口

执行：

curl -v https://example.com


或：

telnet example.com 443


看连接是否超时 / 被拒绝。
→ 超时：服务端挂了或防火墙阻挡。
→ 被拒绝：端口未开放。

### 网络日志和代理检查

如果你使用代理 / VPN，关闭后重试。
使用：

netstat -ano

检查端口占用。
查看浏览器开发者工具 → Network 面板 → 看具体错误码（例如 DNS_PROBE_FINISHED_NXDOMAIN、ERR_CONNECTION_CLOSED 等）。
